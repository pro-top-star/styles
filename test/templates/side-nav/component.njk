{% from "./../icon/component.njk" import icon %}
<!--
nav.fd-side-nav
    div.fd-side-nav__group
        h1.fd-side-nav__title
        ul.fd-side-nav__list
            li.fd-side-nav__item
                a.fd-side-nav__link (.has-child, .is-active, .is-expanded)
                ul.fd-side-nav__sublist
                    li.fd-side-nav__subitem
                    a.fd-side-nav__sublink
-->

{% macro side_nav(properties={}, modifier={}, state={}, aria={}, classes="") -%}
<nav class="fd-side-nav">
    {%- if properties.navgroups  %}
        {%- for navgroup in properties.navgroups %}
        <div class="fd-side-nav__group">
            <h1 class="fd-side-nav__title">
                {{ navgroup.title }}
            </h1>
            <ul class="fd-side-nav__list">
                {%- for item in navgroup.items %}
                <li class="fd-side-nav__item">

                    {%- if item.state.selected -%}
                        {%- set selected = "is-selected" %}
                    {%- else -%}
                        {%- set selected = "" %}
                    {%- endif -%}

                    {%- if item.state.haschild -%}
                        {%- set haschild = "has-child" %}
                    {%- else -%}
                        {%- set haschild = "" %}
                    {%- endif -%}

                    <a class="fd-side-nav__link {{ selected }} {{ haschild }}"{{ aria | aria }} href="{{ item.href or '#' }}">
                        {{ item.label }}
                    </a>
                    {%- if item.items -%}
                    <ul class="fd-side-nav__sublist" aria-hidden="true">
                        {%- for subitem in item.items %}
                            <li class="fd-side-nav__subitem">
                                <a class="fd-side-nav__sublink{{ modifier.link | modifier('nav__link') }}{{ state | state }}"{{ aria | aria }} href="{{ item.href or '#' }}">
                                    {{ subitem.label }}
                                </a>
                            </li>
                        {%- endfor -%}
                    </ul>
                    {%- endif -%}
                </li>
                {%- endfor -%}
            </ul>
        </div>
        {%- endfor -%}
    {%- endif %}
</nav>
{%- endmacro %}
